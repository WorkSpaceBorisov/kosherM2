<?php

use Magento\Catalog\Block\Product\View\Attributes;
use Magento\Framework\Escaper;

?>

<?php

/**
 * Product additional attributes template
 *
 * @var Attributes $block
 * @var Escaper $escaper
 */
?>
<?php
    $_helper = $this->helper(Magento\Catalog\Helper\Output::class);
    $_product = $block->getProduct();
?>

<?php if ($_additional = $block->getAdditionalData()) :?>
    <div class="additional-attributes">
        <?php foreach ($_additional as $_data) :?>
            <?php if($_data['code'] === 'supervision'): ?>
                <div class="attribute-item supervision">
                    <svg width="20" height="16" viewBox="0 0 20 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M4.68517 0.0486918C4.56696 0.0763243 4.41361 0.128971 4.34436 0.165671C4.19938 0.24251 4.2748 0.0257491 3.51916 2.53726C3.01948 4.19806 3.01948 4.19806 2.88509 4.22041C2.69649 4.2518 2.58461 4.32043 2.52071 4.44405C2.4905 4.50252 1.90787 6.39478 1.22604 8.64907C-0.0136785 12.7477 -0.0136785 12.7477 0.00339929 13.0656C0.0164128 13.3074 0.0478719 13.444 0.134785 13.6369C0.590688 14.6483 1.98794 15.5153 3.7668 15.8905C4.22724 15.9877 4.35355 15.9979 5.11505 15.9999C5.79269 16.0016 6.01955 15.988 6.28744 15.9297C7.23911 15.7226 7.87727 15.3406 8.16099 14.8083C8.27944 14.586 8.29718 14.503 8.38922 13.7408C8.44409 13.2862 8.49438 12.9074 8.50102 12.899C8.50767 12.8906 8.53612 12.9028 8.56429 12.9262C8.67422 13.0174 9.09539 13.2039 9.33631 13.2681C9.4997 13.3115 9.73539 13.3355 10 13.3355C10.2646 13.3355 10.5003 13.3115 10.6637 13.2681C10.9046 13.2039 11.3258 13.0174 11.4357 12.9262C11.4639 12.9028 11.4923 12.8906 11.499 12.899C11.5056 12.9074 11.5559 13.2862 11.6108 13.7408C11.7028 14.503 11.7206 14.586 11.839 14.8083C12.1227 15.3406 12.7609 15.7226 13.7126 15.9297C13.9805 15.988 14.2073 16.0016 14.885 15.9999C15.6465 15.9979 15.7728 15.9877 16.2332 15.8905C18.0121 15.5153 19.4093 14.6483 19.8652 13.6369C19.9522 13.444 19.9836 13.3074 19.9966 13.0655C20.0137 12.7477 20.0137 12.7477 18.7736 8.64904C18.0915 6.39474 17.5089 4.50252 17.4789 4.44405C17.4157 4.32098 17.3317 4.26907 17.1267 4.22647C16.9799 4.19599 16.9799 4.19599 16.4805 2.5362C15.7145 -0.00993414 15.8049 0.243956 15.632 0.155743C15.1526 -0.0888451 13.8268 -0.0402245 12.6363 0.26557C11.577 0.537712 10.7113 0.977213 10.5862 1.30638C10.568 1.35434 10.6554 2.21012 10.8018 3.41786C10.9372 4.53481 11.0398 5.462 11.0297 5.4783C11.0197 5.4946 10.9892 5.50792 10.9619 5.50792C10.8871 5.50792 10.745 5.67575 10.7067 5.80926C10.6833 5.89064 10.714 6.26916 10.8044 7.01739C10.8768 7.61667 10.9365 8.13594 10.937 8.17131C10.9378 8.22947 10.9145 8.2281 10.6937 8.1572C10.5074 8.0974 10.3427 8.0788 10 8.0788C9.65735 8.0788 9.49255 8.0974 9.30634 8.1572C9.0855 8.2281 9.06217 8.22947 9.06303 8.17131C9.06354 8.13594 9.12321 7.61667 9.19563 7.01739C9.28602 6.26916 9.31666 5.89064 9.29332 5.80926C9.25503 5.67575 9.11285 5.50792 9.03806 5.50792C9.01082 5.50792 8.9803 5.4946 8.97025 5.4783C8.96017 5.462 9.06275 4.53481 9.1982 3.41786C9.34464 2.21012 9.43202 1.35434 9.41381 1.30638C9.2551 0.888922 8.05857 0.372387 6.63915 0.108608C6.11221 0.010663 4.99445 -0.0236138 4.68517 0.0486918ZM10.3535 10.1602C10.7286 10.4273 10.763 10.8891 10.43 11.1899C10.1534 11.4398 9.81328 11.4286 9.54543 11.1607C9.36613 10.9814 9.30868 10.8036 9.35327 10.5659C9.38356 10.4044 9.66399 10.0987 9.81007 10.0679C9.97421 10.0333 10.2383 10.0781 10.3535 10.1602ZM4.19668 12.4111C4.93333 12.5334 6.08391 13.0172 6.64271 13.4397C7.33098 13.9599 7.27904 14.4075 6.50238 14.6499C5.68284 14.9056 4.25225 14.8371 3.22098 14.4928C2.27404 14.1767 1.45149 13.6152 1.23902 13.14C1.17145 12.9889 1.1702 12.9649 1.2246 12.8597C1.36661 12.585 1.797 12.4188 2.55534 12.3458C2.96497 12.3063 3.75516 12.3378 4.19668 12.4111ZM17.9017 12.4105C18.3858 12.5016 18.6643 12.6448 18.7754 12.8597C18.8298 12.9649 18.8286 12.9889 18.761 13.14C18.6122 13.4726 18.0332 13.9522 17.4509 14.2252C16.7054 14.5746 15.9281 14.7608 15.068 14.7961C13.8632 14.8456 12.9767 14.5948 12.8713 14.1746C12.8378 14.0412 12.9464 13.8174 13.1371 13.6267C13.5705 13.1933 14.7664 12.6224 15.6144 12.4441C16.2794 12.3044 17.2612 12.2899 17.9017 12.4105Z" fill="#202020"/>
                    </svg>
                    <?php
                        $string = $_helper->productAttribute($_product, $_data['value'], $_data['code']); 
                        $str_arr = preg_split ("/\,/", $string); 
                    ?>

                    <?php foreach ($str_arr as $optionItem): ?>
                        <a href="<?= $escaper->escapeUrl(__('/catalogsearch/result/?q=%1', $escaper->escapeHtml($optionItem))) ?>"  class="attribute-item__link">
                            <?= $escaper->escapeHtml($optionItem) ?>
                        </a>
                    <?php endforeach; ?>
                    </div>
            <?php endif; ?>
            <?php if($_data['code'] === 'manufacturer'): ?>
                <a href="<?= $escaper->escapeUrl(__('/catalogsearch/result/?q=%1', $_helper->productAttribute($_product, $_data['value'], $_data['code']))) ?>" class="attribute-item manufacturer">
                    <svg width="18" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7 17V12C7 11.4477 7.44771 11 8 11H10C10.5523 11 11 11.4477 11 12V17H15C15.5523 17 16 16.5523 16 16V9H16.394C17.3105 9 17.7442 7.8698 17.063 7.25671L9.66897 0.602068C9.28866 0.259794 8.71134 0.259794 8.33104 0.602068L0.936995 7.2567C0.255777 7.8698 0.689474 9 1.60596 9H2V16C2 16.5523 2.44772 17 3 17H7Z" fill="#202020"/>
                    </svg>
                    <?= /* @noEscape */ $_helper->productAttribute($_product, $_data['value'], $_data['code']) ?>
                </a>
            <?php endif; ?>
            <?php if($_data['code'] === 'halavi'): ?>
                <a href="<?= $escaper->escapeUrl(__('/catalogsearch/result/?q=%1', $_helper->productAttribute($_product, $_data['value'], $_data['code']))) ?>" class="attribute-item halavi">
                    <svg width="20" height="14" viewBox="0 0 20 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0 13C0 12.4477 0.447715 12 1 12H19C19.5523 12 20 12.4477 20 13C20 13.5523 19.5523 14 19 14H1C0.447716 14 0 13.5523 0 13ZM11.84 2.79C11.94 2.55 12 2.28 12 2C12 0.9 11.1 0 10 0C8.9 0 8 0.9 8 2C8 2.28 8.06 2.55 8.16 2.79C4.5953 3.52847 1.8036 6.36149 1.13372 9.94024C1.02731 10.5087 1.4902 11 2.06854 11H17.9315C18.5098 11 18.9727 10.5087 18.8663 9.94024C18.1964 6.36149 15.4047 3.52847 11.84 2.79Z" fill="#202020"/>
                    </svg>
                    <?= /* @noEscape */ $_helper->productAttribute($_product, $_data['value'], $_data['code']) ?>
                </a>
            <?php endif; ?>
        <?php endforeach; ?>
    </div>
<?php endif;?>
